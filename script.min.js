const passwordText=document.getElementById("password-text"),passwordStrength=document.getElementById("password-strength"),copyBtn=document.getElementById("copy-btn"),refreshBtn=document.getElementById("refresh-btn"),generateBtn=document.getElementById("generate-btn"),passwordLength=document.getElementById("password-length"),lengthSlider=document.getElementById("length-slider"),easySay=document.getElementById("easy-say"),easyRead=document.getElementById("easy-read"),allChars=document.getElementById("all-chars"),uppercase=document.getElementById("uppercase"),lowercase=document.getElementById("lowercase"),numbers=document.getElementById("numbers"),symbols=document.getElementById("symbols"),uppercaseChars="ABCDEFGHIJKLMNOPQRSTUVWXYZ",lowercaseChars="abcdefghijklmnopqrstuvwxyz",numberChars="0123456789",symbolChars="!@#$%^&*()_+{}[]|:;<>,.?/~`-=",ambiguousChars="1lI0Oo",vowels="aeiouAEIOU";function setupEventListeners(){generateBtn.addEventListener("click",(()=>{generatePassword(),copyPassword()})),refreshBtn.addEventListener("click",generatePassword),copyBtn.addEventListener("click",copyPassword),passwordLength.addEventListener("input",(function(e){parseInt(e.target.value)>50&&(e.target.value=50),syncLengthInputs(e),updateSliderColor(e.target.value),generatePassword()})),lengthSlider.addEventListener("input",(function(e){syncLengthInputs(e),updateSliderColor(e.target.value),generatePassword()}));[easySay,easyRead,allChars].forEach((e=>{e.addEventListener("change",(()=>{updateCharSetOptions(),generatePassword()}))}));[uppercase,lowercase,numbers,symbols].forEach((e=>{e.addEventListener("change",(()=>{ensureAtLeastOneChecked(),generatePassword()}))}))}function updateSliderColor(e){const t=lengthSlider.min,s=(e-t)/(lengthSlider.max-t)*100;lengthSlider.style.background=`linear-gradient(to right, var(--primary-color) 0%, var(--primary-color) ${s}%, #e0e0e0 ${s}%, #e0e0e0 100%)`}function generatePassword(){let e=parseInt(passwordLength.value);isNaN(e)&&(e=12),e>50&&(e=50),e<1&&(e=1),passwordLength.value=e;let t="";easySay.checked?(uppercase.checked&&(t+=uppercaseChars.replace(/[0-9AEIOU]/g,"")),lowercase.checked&&(t+=lowercaseChars.replace(/[aeiou]/g,""))):easyRead.checked?(uppercase.checked&&(t+=uppercaseChars.replace(/[1lI0Oo]/g,"")),lowercase.checked&&(t+=lowercaseChars.replace(/[1lI0Oo]/g,"")),numbers.checked&&(t+=numberChars.replace(/[1lI0O]/g,"")),symbols.checked&&(t+=symbolChars)):(uppercase.checked&&(t+=uppercaseChars),lowercase.checked&&(t+=lowercaseChars),numbers.checked&&(t+=numberChars),symbols.checked&&(t+=symbolChars)),""===t&&(t=lowercaseChars,lowercase.checked=!0);let s="";const n=new Uint32Array(e);crypto.getRandomValues(n);for(let r=0;r<e;r++){s+=t[n[r]%t.length]}passwordText.textContent=s,updatePasswordStrength(s)}function updatePasswordStrength(e){let t=0;t+=40*Math.min(e.length/20,1);t+=/[A-Z]/.test(e)?15:0,t+=/[a-z]/.test(e)?15:0,t+=/[0-9]/.test(e)?15:0,t+=/[^A-Za-z0-9]/.test(e)?15:0;let s="";s=t<20?"strength-very-weak":t<40?"strength-weak":t<60?"strength-medium":t<80?"strength-strong":"strength-very-strong",passwordStrength.className="password-strength-meter",passwordStrength.classList.add(s)}function copyPassword(){const e=passwordText.textContent;if(e)if(navigator.clipboard)navigator.clipboard.writeText(e).then((()=>showCopyFeedback(!0))).catch((()=>showCopyFeedback(!1)));else{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();try{document.execCommand("copy"),showCopyFeedback(!0)}catch(e){showCopyFeedback(!1)}document.body.removeChild(t)}}function showCopyFeedback(e){const t=copyBtn.querySelector(".icon").innerHTML;copyBtn.querySelector(".icon").innerHTML=e?'\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="var(--success-color)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n        <path d="M20 6L9 17l-5-5"/>\n      </svg>':'\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n        <line x1="18" y1="6" x2="6" y2="18"></line>\n        <line x1="6" y1="6" x2="18" y2="18"></line>\n      </svg>',setTimeout((()=>{copyBtn.querySelector(".icon").innerHTML=t}),1500)}function syncLengthInputs(e){const t=e.target.value;e.target===passwordLength?lengthSlider.value=t:passwordLength.value=t}function updateCharSetOptions(){easySay.checked?(numbers.checked=!1,symbols.checked=!1,numbers.disabled=!0,symbols.disabled=!0):(numbers.disabled=!1,symbols.disabled=!1)}function ensureAtLeastOneChecked(){uppercase.checked||lowercase.checked||numbers.checked||symbols.checked||(lowercase.checked=!0)}function setupFaqAccordion(){const e=document.querySelectorAll(".faq-item");e.forEach((e=>{const t=e.querySelector(".faq-answer"),s=t.querySelector("p");t.style.cssText="max-height: none; opacity: 0; position: absolute; visibility: hidden;";const n=s.offsetHeight+40;t.setAttribute("data-height",`${n}px`),t.style.cssText=""})),e.forEach((t=>{const s=t.querySelector(".faq-question"),n=t.querySelector(".faq-answer");s.addEventListener("click",(()=>{const s=t.classList.contains("active");e.forEach((e=>{if(e!==t){const t=e.querySelector(".faq-answer");t.style.transition="none",t.style.maxHeight="0px",t.style.opacity="0",e.classList.remove("active"),t.offsetHeight,setTimeout((()=>{t.style.transition=""}),10)}})),s?(n.style.maxHeight="0px",n.style.opacity="0",setTimeout((()=>{t.classList.remove("active")}),200)):(n.style.transition="",t.classList.add("active"),requestAnimationFrame((()=>{const e=n.getAttribute("data-height");n.style.maxHeight=e,n.style.opacity="1"})))}))})),e.length>0&&setTimeout((()=>{const t=e[0],s=t.querySelector(".faq-answer");t.classList.add("active"),requestAnimationFrame((()=>{const e=s.getAttribute("data-height");s.style.maxHeight=e,s.style.opacity="1"}))}),100)}function setupSmoothScrolling(){const e=document.querySelector("header").offsetHeight;document.querySelectorAll('header a[href^="#"]').forEach((t=>{t.addEventListener("click",(function(t){t.preventDefault();const s=this.getAttribute("href"),n=document.querySelector(s);if(n){const t=n.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:t-e-20,behavior:"smooth"})}}))}))}document.addEventListener("DOMContentLoaded",(()=>{updateSliderColor(lengthSlider.value),generatePassword(),setupEventListeners(),setupFaqAccordion(),setupSmoothScrolling()}));